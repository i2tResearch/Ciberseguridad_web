# using flask_restful
from flask import Flask, jsonify, request
from flask_restful import Resource, Api
  
# creating the flask app
app = Flask(__name__)
# creating an API object
api = Api(app)

class Hello(Resource):
  
    # corresponds to the GET request.
    # this function is called whenever there
    # is a GET request for this resource
    def get(self):
  
        return jsonify({'message': 'hello world'})
  
    # Corresponds to POST request
    def post(self):
          
        data = request.get_json()     # status code
        return jsonify({'data': data}), 201
  
  
class Security(Resource):

    v=""
    #get general
    def get(self):
        return jsonify(v['predictions'])
    
    def post(self):
        global v
        v={'predictions': request.json['predictions']}
     
        return jsonify(v['predictions'])


class FilePath(Resource):
    file_path= None
    def post(self):
        global file_path
        file_path = request.json['fileContent']
        print(f'Received data: {file_path}')
        return file_path
    
    def get(self):
        global file_path
        return jsonify(file_path)


# adding the defined resources along with their corresponding urls
api.add_resource(Hello, '/')
api.add_resource(Security, '/data')
api.add_resource(FilePath, '/path')

# driver function
if __name__ == '__main__':
  
    app.run(debug = True, port= 4000)